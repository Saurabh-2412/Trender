{"ast":null,"code":"import React from \"react\";\nimport axios from \"axios\";\nimport { toastError } from \"../Utils/ToastMessages\";\nexport const setupAuthHeaderForServiceCalls = token => {\n  if (token) {\n    return axios.defaults.headers.common[\"Authorization\"] = token;\n  }\n\n  delete axios.defaults.headers.common[\"Authorization\"];\n};\nexport const setupAuthExceptionHandler = (logout, navigate, dispatch) => {\n  const UNAUTHORIZED = 401;\n  axios.interceptors.response.use(response => response, error => {\n    var _error$response;\n\n    if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === UNAUTHORIZED) {\n      dispatch(logout());\n      navigate(\"login\");\n      toastError(\"Token expired,please login again\");\n    }\n\n    return Promise.reject(error);\n  });\n};","map":{"version":3,"sources":["E:/NeogCampProjects/LevelOneProjects/Social-Media/social-media-app/src/features/authentication/ServiceHandler.js"],"names":["React","axios","toastError","setupAuthHeaderForServiceCalls","token","defaults","headers","common","setupAuthExceptionHandler","logout","navigate","dispatch","UNAUTHORIZED","interceptors","response","use","error","status","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,wBAA3B;AAEA,OAAO,MAAMC,8BAA8B,GAAIC,KAAD,IAAW;AACvD,MAAIA,KAAJ,EAAW;AACT,WAAQH,KAAK,CAACI,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDH,KAAzD;AACD;;AACD,SAAOH,KAAK,CAACI,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,CALM;AAOP,OAAO,MAAMC,yBAAyB,GAAG,CAACC,MAAD,EAASC,QAAT,EAAmBC,QAAnB,KAAgC;AACvE,QAAMC,YAAY,GAAG,GAArB;AACAX,EAAAA,KAAK,CAACY,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CACGD,QAAD,IAAcA,QADhB,EAEGE,KAAD,IAAW;AAAA;;AACT,QAAI,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,+BAAAA,KAAK,CAAEF,QAAP,oEAAiBG,MAAjB,MAA4BL,YAAhC,EAA8C;AAC5CD,MAAAA,QAAQ,CAACF,MAAM,EAAP,CAAR;AACAC,MAAAA,QAAQ,CAAC,OAAD,CAAR;AACAR,MAAAA,UAAU,CAAC,kCAAD,CAAV;AACD;;AACD,WAAOgB,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACD,GATH;AAWD,CAbM","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { toastError } from \"../Utils/ToastMessages\";\r\n\r\nexport const setupAuthHeaderForServiceCalls = (token) => {\r\n  if (token) {\r\n    return (axios.defaults.headers.common[\"Authorization\"] = token);\r\n  }\r\n  delete axios.defaults.headers.common[\"Authorization\"];\r\n};\r\n\r\nexport const setupAuthExceptionHandler = (logout, navigate, dispatch) => {\r\n  const UNAUTHORIZED = 401;\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n      if (error?.response?.status === UNAUTHORIZED) {\r\n        dispatch(logout());\r\n        navigate(\"login\");\r\n        toastError(\"Token expired,please login again\");\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}