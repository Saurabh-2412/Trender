{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { toastSuccess } from \"../Utils/ToastMessages\";\nimport { setupAuthHeaderForServiceCalls } from \"./ServiceHandler\";\nimport { clearLocalStorage, setlocalStorage } from \"./Storage\";\nexport const userRegisteration = createAsyncThunk(\"auth/signup\", async (values, {\n  fulfillWithValue,\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(\"https://Social-Media.saurabhsharma11.repl.co/v1/userAuth/signup\", values);\n\n    if (response.status === 201) {\n      toastSuccess(\"User Registered Successfully\");\n    }\n\n    return fulfillWithValue(response);\n  } catch (error) {\n    return rejectWithValue(error.response);\n  }\n});\nexport const login = createAsyncThunk(\"auth/login\", async (values, {\n  fulfillWithValue,\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(\"https://Social-Media.saurabhsharma11.repl.co/v1/userAuth/login\", values); //console.log(response);\n\n    if (response.status === 200) {\n      setupAuthHeaderForServiceCalls(response.data.token);\n      setlocalStorage(response.data.userdata, response.data.token);\n    }\n\n    return fulfillWithValue(response.data);\n  } catch (error) {\n    return rejectWithValue(error.response);\n  }\n});\nconst currentUser = {\n  username: \"\",\n  name: \"\",\n  profilePicture: \"\",\n  userid: \"\"\n};\nconst AuthSlice = createSlice({\n  name: \"auth\",\n  initialState: {\n    currentUser: currentUser,\n    token: \"\",\n    status: \"idle\",\n    error: null\n  },\n  reducers: {\n    logout: state => {\n      state.status = \"idle\";\n      state.token = \"\";\n      clearLocalStorage();\n    },\n    setData: (state, action) => {\n      state.token = action.payload.token;\n      state.currentUser = action.payload.userdata;\n    }\n  },\n  extraReducers: {\n    [login.pending]: state => {\n      state.status = \"pending\";\n    },\n    [login.fulfilled]: (state, action) => {\n      state.status = \"success\";\n      state.token = action.payload.token;\n      state.currentUser = action.payload.userdata;\n    },\n    [login.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    }\n  }\n});\nexport const {\n  logout,\n  setData,\n  updateUser\n} = AuthSlice.actions;\nexport default AuthSlice.reducer;","map":{"version":3,"sources":["E:/NeogCampProjects/LevelOneProjects/Social-Media/social-media-app/src/features/authentication/AuthSlice.js"],"names":["createAsyncThunk","createSlice","axios","toastSuccess","setupAuthHeaderForServiceCalls","clearLocalStorage","setlocalStorage","userRegisteration","values","fulfillWithValue","rejectWithValue","response","post","status","error","login","data","token","userdata","currentUser","username","name","profilePicture","userid","AuthSlice","initialState","reducers","logout","state","setData","action","payload","extraReducers","pending","fulfilled","rejected","message","updateUser","actions","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { toastSuccess } from \"../Utils/ToastMessages\";\r\nimport { setupAuthHeaderForServiceCalls } from \"./ServiceHandler\";\r\nimport { clearLocalStorage, setlocalStorage } from \"./Storage\";\r\n\r\nexport const userRegisteration = createAsyncThunk(\r\n    \"auth/signup\",\r\n    async(values, { fulfillWithValue, rejectWithValue }) => {\r\n    try{\r\n        const response = await axios.post(\"https://Social-Media.saurabhsharma11.repl.co/v1/userAuth/signup\", values);\r\n        if(response.status === 201){\r\n            toastSuccess(\"User Registered Successfully\");\r\n        }\r\n        return fulfillWithValue(response);\r\n    }\r\n    catch(error){\r\n        return rejectWithValue(error.response);\r\n    }\r\n})\r\n\r\nexport const login = createAsyncThunk(\r\n    \"auth/login\",\r\n    async (values, { fulfillWithValue, rejectWithValue }) => {\r\n        try {\r\n            const response = await axios.post(\r\n                \"https://Social-Media.saurabhsharma11.repl.co/v1/userAuth/login\",values\r\n            );\r\n            //console.log(response);\r\n            if (response.status === 200) {\r\n                setupAuthHeaderForServiceCalls(response.data.token);\r\n                setlocalStorage(response.data.userdata, response.data.token);\r\n            }\r\n            return fulfillWithValue(response.data);\r\n        } catch (error) {\r\n            return rejectWithValue(error.response);\r\n        }\r\n    }\r\n);\r\n\r\nconst currentUser = {\r\n    username: \"\",\r\n    name: \"\",\r\n    profilePicture: \"\",\r\n    userid: \"\"\r\n};\r\n\r\nconst AuthSlice = createSlice({\r\n    name: \"auth\",\r\n    initialState: {\r\n        currentUser: currentUser,\r\n        token: \"\",\r\n        status: \"idle\",\r\n        error: null,\r\n    },\r\n    reducers : {\r\n        logout: (state) => {\r\n            state.status = \"idle\";\r\n            state.token = \"\";\r\n            clearLocalStorage();\r\n        },\r\n        setData: (state, action) => {\r\n            state.token = action.payload.token;\r\n            state.currentUser = action.payload.userdata;\r\n        }\r\n    },\r\n    extraReducers : {\r\n        [ login.pending ]: (state) => {\r\n            state.status = \"pending\";\r\n        },\r\n        [ login.fulfilled ]: (state, action) => {\r\n            state.status = \"success\";\r\n            state.token = action.payload.token;\r\n            state.currentUser = action.payload.userdata\r\n        },\r\n        [ login.rejected ]: (state, action) => {\r\n            state.status = \"failed\";\r\n            state.error = action.error.message;\r\n        }\r\n    }\r\n})\r\n\r\nexport const { logout, setData, updateUser } = AuthSlice.actions;\r\n\r\nexport default AuthSlice.reducer;"]},"metadata":{},"sourceType":"module"}