{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchUser = createAsyncThunk(\"users/fetchUser\", async (username, {\n  fulfillWithValue,\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(`https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/${username}`);\n    return fulfillWithValue(response.data);\n  } catch (error) {\n    return rejectWithValue(error.response);\n  }\n});\nexport const updateProfile = createAsyncThunk(\"users.editProfile\", async ({\n  values,\n  image\n}, {\n  fulfillWithValue,\n  rejectWithValue\n}) => {\n  if (image) {\n    const formData = new FormData();\n    const fileName = Date().now + image.name;\n    formData.append(\"image\", image);\n    formData.append(\"name\", fileName);\n\n    try {\n      const {\n        data,\n        status\n      } = await axios.post(`https://social-media.saurabhsharma11.repl.co/v1/images/upload`, formData);\n\n      if (status === 201) {\n        values.profilePicture = data.url;\n      }\n    } catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  try {\n    const response = await axios.post(\"https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/update\", values); //console.log(\"api\",response);\n\n    return fulfillWithValue(response.data);\n  } catch (error) {\n    rejectWithValue(error.response);\n  }\n});\nexport const follow = createAsyncThunk(\"user/follow\", async (userid, {\n  fulfillWithValue,\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/follow/${userid}`);\n    console.log(\"follow\", response.data);\n    return fulfillWithValue(response.data);\n  } catch (error) {\n    return rejectWithValue(error.resposne);\n  }\n});\nexport const unFollow = createAsyncThunk(\"user/unfollow\", async (userid, {\n  fulfillWithValue,\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/unfollow/${userid}`);\n    console.log(\"unfollow\", response.data);\n    return fulfillWithValue(response.data);\n  } catch (error) {\n    return rejectWithValue(error.response);\n  }\n});\nexport const getFollowers = createAsyncThunk(\"user/followers\", async username => {\n  const response = await axios.get(`https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/${username}/followers`);\n  return response.data;\n});\nexport const getFollowing = createAsyncThunk(\"user/following\", async username => {\n  const response = await axios.get(`${process.env.REACT_APP_SERVER}/user/${username}/following`);\n  return response.data;\n});\nexport const userSlice = createSlice({\n  name: \"users\",\n  initialState: {\n    user: \"\",\n    followers: [],\n    following: [],\n    status: \"idle\",\n    error: null\n  },\n  reducers: {},\n  extraReducers: {\n    [fetchUser.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [fetchUser.fulfilled]: (state, action) => {\n      state.status = \"success\";\n      state.user = action.payload;\n    },\n    [fetchUser.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error;\n    },\n    [updateProfile.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [updateProfile.fulfilled]: (state, action) => {\n      state.status = \"success\";\n      state.user = action.payload;\n    },\n    [updateProfile.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error;\n    },\n    [follow.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [follow.fulfilled]: (state, action) => {\n      state.status = \"success\";\n      state.user.followers = action.payload.followers;\n    },\n    [follow.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error;\n    },\n    [unFollow.pending]: state => {\n      state.status = \"pending\";\n    },\n    [unFollow.fulfilled]: (state, action) => {\n      state.status = \"success\";\n      state.user.followers = action.payload.followers;\n    },\n    [unFollow.rejected]: (state, action) => {\n      state.status = \"failed\";\n      state.status = action.error;\n    }\n  }\n});\nexport const {} = userSlice.actions;\nexport default userSlice.reducer;\nexport const selectUserById = (state, username) => state.user.userDb.find(item => item.username === username);","map":{"version":3,"sources":["E:/NeogCampProjects/LevelOneProjects/Social-Media/social-media-app/src/features/user/userSlice.js"],"names":["createAsyncThunk","createSlice","axios","fetchUser","username","fulfillWithValue","rejectWithValue","response","get","data","error","updateProfile","values","image","formData","FormData","fileName","Date","now","name","append","status","post","profilePicture","url","err","console","log","message","follow","userid","resposne","unFollow","getFollowers","getFollowing","process","env","REACT_APP_SERVER","userSlice","initialState","user","followers","following","reducers","extraReducers","pending","state","action","fulfilled","payload","rejected","actions","reducer","selectUserById","userDb","find","item"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nexport const fetchUser = createAsyncThunk(\r\n  \"users/fetchUser\",\r\n  async (username, { fulfillWithValue, rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/${username}`\r\n      );\r\n      return fulfillWithValue(response.data);\r\n    } catch (error) {\r\n      return rejectWithValue(error.response);\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateProfile = createAsyncThunk(\r\n  \"users.editProfile\",\r\n  async ({ values, image }, { fulfillWithValue, rejectWithValue }) => {\r\n    if (image) {\r\n      const formData = new FormData();\r\n      const fileName = Date().now + image.name;\r\n      formData.append(\"image\", image);\r\n      formData.append(\"name\", fileName);\r\n      try {\r\n        const { data, status } = await axios.post(\r\n          `https://social-media.saurabhsharma11.repl.co/v1/images/upload`,\r\n          formData\r\n        );\r\n        if (status === 201) {\r\n          values.profilePicture = data.url;\r\n        }\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/update\",\r\n        values\r\n      );\r\n      //console.log(\"api\",response);\r\n      return fulfillWithValue(response.data);\r\n    } catch (error) {\r\n      rejectWithValue(error.response);\r\n    }\r\n  }\r\n);\r\n\r\nexport const follow = createAsyncThunk(\r\n  \"user/follow\",\r\n  async (userid, { fulfillWithValue, rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/follow/${userid}`\r\n      );\r\n      console.log(\"follow\",response.data);\r\n      return fulfillWithValue(response.data);\r\n    } catch (error) {\r\n      return rejectWithValue(error.resposne);\r\n    }\r\n  }\r\n);\r\n\r\nexport const unFollow = createAsyncThunk(\r\n  \"user/unfollow\",\r\n  async (userid, { fulfillWithValue, rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/unfollow/${userid}`\r\n      );\r\n      console.log(\"unfollow\",response.data);\r\n      return fulfillWithValue(response.data);\r\n    } catch (error) {\r\n      return rejectWithValue(error.response);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getFollowers = createAsyncThunk(\r\n  \"user/followers\",\r\n  async (username) => {\r\n    const response = await axios.get(\r\n      `https://Social-Media.saurabhsharma11.repl.co/v1/userProfile/${username}/followers`\r\n    );\r\n    return response.data;\r\n  }\r\n);\r\n\r\nexport const getFollowing = createAsyncThunk(\r\n  \"user/following\",\r\n  async (username) => {\r\n    const response = await axios.get(\r\n      `${process.env.REACT_APP_SERVER}/user/${username}/following`\r\n    );\r\n    return response.data;\r\n  }\r\n);\r\n\r\n\r\nexport const userSlice = createSlice({\r\n    name: \"users\",\r\n    initialState: {\r\n        user: \"\",\r\n        followers: [],\r\n        following: [],\r\n        status: \"idle\",\r\n        error: null\r\n    },\r\n    reducers: { },\r\n    extraReducers: {\r\n      [fetchUser.pending]: (state, action) => {\r\n        state.status = \"pending\";\r\n      },\r\n      [fetchUser.fulfilled]: (state, action) => {\r\n        state.status = \"success\";\r\n        state.user = action.payload;\r\n      },\r\n      [fetchUser.rejected]: (state, action) => {\r\n        state.status = \"failed\";\r\n        state.error = action.error;\r\n      },\r\n      [updateProfile.pending]: (state, action) => {\r\n        state.status = \"pending\";\r\n      },\r\n      [updateProfile.fulfilled]: (state, action) => {\r\n        state.status = \"success\";\r\n        state.user = action.payload;\r\n      },\r\n      [updateProfile.rejected]: (state, action) => {\r\n        state.status = \"failed\";\r\n        state.error = action.error;\r\n      },\r\n      [follow.pending]: (state, action) => {\r\n        state.status = \"pending\";\r\n      },\r\n      [follow.fulfilled]: (state, action) => {\r\n        state.status = \"success\";\r\n        state.user.followers = action.payload.followers;\r\n      },\r\n      [follow.rejected]: (state, action) => {\r\n        state.status = \"failed\";\r\n        state.error = action.error;\r\n      },\r\n      [unFollow.pending]: (state) => {\r\n        state.status = \"pending\";\r\n      },\r\n      [unFollow.fulfilled]: (state, action) => {\r\n        state.status = \"success\";\r\n        state.user.followers = action.payload.followers;\r\n      },\r\n      [unFollow.rejected]: (state, action) => {\r\n        state.status = \"failed\";\r\n        state.status = action.error;\r\n      }\r\n    }\r\n});\r\n\r\nexport const { } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n\r\nexport const selectUserById = (state, username) =>\r\n  state.user.userDb.find((item) => item.username === username);"]},"metadata":{},"sourceType":"module"}